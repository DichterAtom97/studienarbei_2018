/*
 * i2c.h
 *
 *  Created on: 03.02.2018
 *      Author: Christoph
 */

#ifndef I2C_H_
#define I2C_H_

void i2c_init(void);
void i2c_tx(unsigned char, unsigned char *, unsigned char, unsigned char, unsigned char, unsigned char);
void i2c_rx(unsigned char, unsigned char *, unsigned char, unsigned char, unsigned char, unsigned char);
void usdelay(int);


typedef struct
{
    volatile unsigned char *data_buf;       // address of tx or rx data buffer
    volatile unsigned char buf_size;        // size of the buffer
    volatile unsigned char buf_index;       // index in the buffer
    volatile unsigned char addr_index;      // index of the byte address (0,1)
    volatile unsigned char isr_mode;        // Tx or Rx affects the interrupt logic
    volatile unsigned char addr_high_byte;  // High byte of the address to read/write to
    volatile unsigned char addr_low_byte;   // Low byte of the address to read/write to
    volatile unsigned char addr_type;       // two bytes like eeprom or 1 byte like RTC for example
} i2c_t;

#endif /* I2C_H_ */
