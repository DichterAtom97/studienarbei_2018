/**
 * main.c
 */

#include <stdio.h>
#include <stdint.h>
#include "msp430g2553.h"
#include "i2c.h"
#include "adps_gesture.h"

int main(void)
{
    unsigned char *rx_data;
    uint8_t address = 0x39;
    uint8_t command[] = {0xAA, 0x01};
    uint8_t *command_ptr = command;

    WDTCTL = WDTPW + WDTHOLD;                // Stop WDT
    BCSCTL1 = CALBC1_1MHZ;                   // Set DCO to 1MHz
    DCOCTL = CALDCO_1MHZ;
    I2C_init(address);                              // Initialize I2C
    //adps_init();
    //usdelay(6000);     //POR -> SLEEP state
    __delay_cycles(1000000);

    I2C_write(2, command_ptr);

    //adps_setGestureInt();
    //i2c_rx(ADPS99_ADDR, rx_data, 1, 1, GCONFIG4);
    //adps_setGestureDirection(ALL_DIRECTIONS);
    //i2c_rx(ADPS99_ADDR, rx_data, 1, 1, GCONFIG3);
   // adps_setGesturePulse();
    //i2c_rx(ADPS99_ADDR, rx_data, 1, 1, GPULSE);

    


    /*
    Address is High byte then low byte
    i2c_tx(EEPROM_ADDR, txdataEEPROM, sizeof(txdataEEPROM)-1,TWOBYTEADDR,0x01,0x00);//i2c TX 115 bytes starting @ address 01:00
    i2c_tx(EEPROM_ADDR, txdataEEPROM, sizeof(txdataEEPROM)-1,TWOBYTEADDR,0x02,0x00);//i2c TX 115 bytes starting @ address 02:00
    i2c_tx(EEPROM_ADDR, txdataEEPROM, sizeof(txdataEEPROM)-1,TWOBYTEADDR,0x03,0x00);//i2c TX 115 bytes starting @ address 03:00
    i2c_tx(DS3231_ADDR, txdataDS3231, 7,ONEBYTEADDR,0x00,0x00);//i2c TX 7 bytes "HELLO WORLD" starting @ address 00
    i2c_tx(DS3231_ADDR, txdataDS3231, 7,ONEBYTEADDR,0x00,0x00);//i2c TX 7 bytes "HELLO WORLD" starting @ address 00

    i2c_rx(EEPROM_ADDR, rxdata, 115,TWOBYTEADDR,0x01,0x00);//i2c RX 115 bytes from EEPROM starting @ address 01:00
    i2c_rx(EEPROM_ADDR, rxdata, 115,TWOBYTEADDR,0x02,0x00);//i2c RX 115 bytes from EEPROM starting @ address 02:00
    i2c_rx(EEPROM_ADDR, rxdata, 115,TWOBYTEADDR,0x03,0x00);//i2c RX 115 bytes from EEPROM starting @ address 03:00

    i2c_rx(DS3231_ADDR, rxdata, 7,ONEBYTEADDR,0x00,0x00);//i2c RX 7 bytes from DS3231 starting @ address 00:00
    */
    LPM0;                                    // Enter LPM0 w/ interrupts
}
